# チャットの仕様

## 前提

- このプロジェクトはWebSocketの勉強用であり、本番での運用は想定していない
- Golangでクライアントとサーバーを実装する

## 技術的な詳細

- クライアント、サーバーともにCLIでの動作をする
- ポートは 28080 固定
- サーバーのプロセスがチャットルームを生成する
- チャットIDは数字6桁+チェックディジット(7DR方式)で、仮実装では `1234564` 固定
- トークンはチャットIDと参加者の名前を結合したものをに固定のソルト ( `oAQF6zsVq7xg3sd6` ) を更に結合し、MD5でハッシュ化した値

## シーケンス図

```mermaid
sequenceDiagram
    participant クライアント
    participant サーバー
    participant チャットルーム

    クライアント ->> サーバー: チャットIDを送信
    サーバー ->> チャットルーム: 存在確認

    alt チャットルームが存在しない場合
        チャットルーム -->> サーバー: チャットルームがない
        サーバー -->> クライアント: チャットルームに入れないことを通知
    else チャットルームが存在する場合
        サーバー -->> クライアント: トークンを返却
        
        クライアント ->> サーバー: メッセージとトークンを送信
        
        サーバー ->> チャットルーム: (メッセージ転送)
        チャットルーム ->> 他の参加者: チャットルームの会話を送信
    end
```
